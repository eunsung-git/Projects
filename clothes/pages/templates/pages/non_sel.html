{% extends 'base.html' %}

{% block body %}

<h3 align="right" style="font-size: 28px;">비회원 님, 환영합니다!</h1>
<center>
    <br><br><br><br><br><h2 style="font-size: 45px;">"오늘 뭐 입지?"</h1> <br><br>

    <form action="{% url 'pages:recom' %}">
        <fieldset style="width:300px; height: 230px; text-align: center;">
            <legend align="center" style="font-size: 25px;">정보 입력</legend>

                <!-- 날짜     -->
                <span style="font-size: 20px;">날짜</span> 
                <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
                <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
                <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
                <script src="./jquery-ui-1.12.1/datepicker-ko.js"></script>

                <script>
                    $(function() {
                        $( "#Datepicker" ).datepicker({
                            changeMonth: true, 
                            changeYear: true,
                            nextText: '다음 달',
                            prevText: '이전 달',
                            minDate: 0, 
                            maxDate: "+9D",
                            dateFormat: "yy-mm-dd",
                        });
                    });
                </script>
                <input type="text" id="Datepicker" name="date">  <br><br>


                <!-- 지역  -->
                <span style="font-size: 20px;">지역</span> 
                <input type="text" id="region" name="region">
                <a id="region-search">Search</a>
                <ul id="region-result"></ul>
                
                <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
                <script>
                    var regionInput = document.getElementById('region')
                    var searchButton = document.getElementById('region-search')
                    var regionResult = document.getElementById('region-result')

                    searchButton.addEventListener('click', function () {
                        dong = regionInput.value
                
                        axios.get('/search_region/',  {
                                        params: {
                                            dong: dong
                                        }
                                    })
                                .then(function (response) {
                                    regions = response.data.jibuns.map(function (region) {
                                        return region.join(' ')
                                    })
                                    regionResult.innerHTML = ''
                                    regions.forEach(function (region) {
                                        const li = document.createElement('li')
                                        li.classList.add('region-result-item')
                                        li.append(region)
                                        regionResult.append(li)
                                    })

                                    items = document.querySelectorAll('.region-result-item')
                                    items.forEach(function (element) {
                                        element.addEventListener('click', function (e) {
                                                regionInput.value = e.target.innerText
                                                regionResult.innerHTML = ''
                                            })
                                        })
                                })
                    })
                </script>

                <!-- 성별 -->
                <!-- <span style="font-size: 18px;">남</span> <input type="radio" name='gender'> 
                <span style="font-size: 18px;">여</span> <input type="radio" name="gender">  -->
                <input type="radio" name="gender" value="남성">남성
                <input type="radio" name="gender" value="여성">여성
                <br><br>
                
            <!-- 추천 버튼 대신 돋보기 버튼 -->
            <input type='submit' value='추천' style="width:60px; height: 40px; font-size: 20px;">
            <!-- <button type="submit"><img src="" alt="submit">추천</button> -->

        </fieldset>
    </form>
</center>
    
{% endblock %}



